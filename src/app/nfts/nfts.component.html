<div class="mainform">
  <div *ngFor="let nft of nfts" style="display: inline-flex;margin:10px;">
    <div *ngIf="format=='obj'" style="display: block;width: 450px;height:650px;padding:10px;" class="mat-elevation-z4">
      <strong>{{nft.metadataOnchain?.data?.name}}</strong>&nbsp;({{nft.metadataOnchain.data.symbol}})<br>
      <small>Collection: {{nft.metadataOffchain?.collection?.name}}</small><br>
      <small>NFT address: <a [href]="'https://solscan.io/token/'+nft.address+'?cluster='+network.network" target="_blank">{{nft.address}}</a> </small>
      <br><br>


      <table style="font-size: xx-small;width:100%;line-height: 85%;">
        <tr *ngFor="let attr of nft.metadataOffchain?.attributes" (click)="update_field(attr,nft)">
          <td>{{attr.trait_type}}</td>
          <td>{{attr.value}}</td>
        </tr>
        <tr>
          <td></td>
          <td><a [href]="nft.metadataOnchain?.data?.uri" target="_blank">Fichier attaché</a></td>
        </tr>
        <tr>

        </tr>

        <tr></tr>
        <tr><td><h4>Fichiers</h4></td></tr>
        <tr *ngFor="let file of nft.metadataOffchain?.properties?.files">
          <td>{{file.type}}</td>
          <td><a [href]="file?.uri" target="_blank"><mat-icon   style="font-size: medium;">link</mat-icon></a></td>
        </tr>

        <tr><td><br><h4>Créateurs</h4></td></tr>
        <tr><th>Adresse</th><th>Vérifié</th><th>Royalties</th></tr>
        <tr *ngFor="let creator of nft.metadataOnchain?.data?.creators" style="text-align: center;">
          <td style="padding:0px;width:60%;height:20px;vertical-align:text-top !important;text-align: left;">
            <a [href]="get_explorer(creator.address)" target="_blank"><mat-icon>person</mat-icon></a>
            <div style="display: inline-block;">{{creator.address | alias}}</div>
          </td>
          <td>
            <mat-icon *ngIf="creator.verified==1">checkmark</mat-icon>
            <mat-icon *ngIf="creator.verified==0" (click)="sign_token(nft,creator)">edit</mat-icon>
          </td>
          <td>{{creator.share}}%</td>
        </tr>
      </table>

      <br>
      <h3>OnChain</h3>
      <table style="font-size: small" *ngIf="nft.metadataOnchain">
        <tr><td>Update authority</td><td><a [href]="getExplorer(nft.metadataOnchain.updateAuthority)" target="_blank">{{nft.metadataOnchain?.updateAuthority | alias}}</a></td>
        <tr><td>Mint authority</td><td><a [href]="getExplorer(nft.splMintInfo?.mintAuthority)" target="_blank">{{nft.splMintInfo?.mintAuthority | alias}}</a></td>
        <tr><td>Owner</td><td><a [href]="getExplorer(nft.splTokenInfo?.owner)" target="_blank">{{nft.splTokenInfo?.owner | alias}}</a></td>
        </tr>
      </table>

      <button
              type="button" mat-icon-button
              title="Supprimer le NFT"
              (click)="burn(nft)"
              *ngIf="format=='obj' && (nft.metadataOnchain?.updateAuthority==user || network.isElrond())">
        <mat-icon>delete</mat-icon>
      </button>

      <button
              type="button" mat-icon-button
              title="Utiliser le NFT"
              (click)="use_token(nft)"
              *ngIf="format=='obj' && (!network.isElrond())">
        <mat-icon>build</mat-icon>
      </button>



    </div>
    <span *ngIf="format=='str'">{{nft}}</span>

    <div *ngIf="format=='json'" class="mat-elevation-z4" style="padding: 10px;">
      {{nft.metadataOffchain?.name}}<br>
      <ngx-json-viewer [json]="nft" [expanded]="false"></ngx-json-viewer>
    </div>

    <div *ngIf="format=='html'" [innerHTML]="nft" style="display: inline-block;"></div>

  </div>


</div>
