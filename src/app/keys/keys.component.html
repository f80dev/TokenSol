<div class="mainform">
  <div class="mat-headline-2 color-primary">Gestion des clés hébergées</div>

  <div style="display: flex;align-items: center;justify-content: center;flex-wrap: wrap;">
    <app-input label="Coller ici votre clé privée" [value]="privateKey" help="Plusieurs formats sont acceptés" maxlength="200"></app-input>
    <app-input label="Donner un nom" [value]="name" help="Nom court" maxlength="200"></app-input>

    <button
            type="button" aria-label="Ajouter" mat-raised-button
            [disabled]="name=='' || privateKey==''"
            (click)="add_key()">
      Ajouter
    </button>

    <button
            type="button" aria-label="Ajouter" mat-raised-button
            [disabled]="name==''"
            (click)="new_key()">
      Nouveau wallet
    </button>

    <button
            type="button" aria-label="Ajouter" mat-raised-button
            (click)="open_elrond_wallet()">
      Wallet Elrond
    </button>

    <app-upload-file extensions=".key,.txt"
                     style="margin:10px;"
                     (uploaded)="onuploaded_key_file($event)">Charger les fichiers de clé
    </app-upload-file>

  </div>

  <br>
  <h2>
    Liste des clés disponibles sur le serveur pour le {{network.network}}
    <mat-icon (click)="refresh()">refresh</mat-icon>

  </h2>


  <table>
    <tr style="font-style: italic;font-size: large">
      <th>Alias</th>
      <th>Public Key</th>
      <th>QRCode</th>
      <th>Commandes</th>
      <th></th>
      <th>Solde</th>
    </tr>
    <tr *ngFor="let key of network.keys">
      <td>
        <a [href]="key.explorer" target="_blank"><strong>{{key.name}}</strong></a>
      </td>
      <td style="font-size: small;">
        <a [href]="key.explorer">{{key.address.substring(0,5)+' ... '+key.address.substring(key.address.length-5)}}</a>
        &nbsp;<mat-icon [cdkCopyToClipboard]="key.address" style="cursor: copy;font-size: small;display: inline;">content_copy</mat-icon>
      </td>
      <td>
        <img *ngIf="key.qrcode!.length>0" [src]="key.qrcode" style="width: 100px;cursor: pointer;" title="cliquer pour copier l'adresse" [cdkCopyToClipboard]="key.address">
      </td>
      <td style="display: flex;flex-wrap: wrap;justify-content: center;">
        <button mat-icon-button (click)="del_key(key.name)" title="supprimer">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-icon-button  (click)="encrypt(key)" title="Encrypter">
          <mat-icon>key</mat-icon>
        </button>
        <button type="button" mat-raised-button mat-button (click)="open_wallet(key)">
          Wallet interne
        </button>
        <button type="button" mat-raised-button mat-button (click)="open_lazy_wallet(key)">
          Lazy
        </button>
        <button type="button" mat-raised-button mat-button (click)="open_collections(key,'nfluent')">
          Collections
        </button>
        <button type="button" mat-raised-button mat-button (click)="open_collections(key,'inspire')">
          Inspire
        </button>
        <button type="button" mat-raised-button mat-button
                [cdkCopyToClipboard]="key.address"
                (click)="open_faucet(key)">
          Recharger
        </button>
      </td>
      <td></td>
      <td>
        <span *ngIf="key.balance">{{key.balance/1e18 | number}} {{key.unity}}</span>
      </td>
    </tr>
  </table>

  <br>
  <p>La fonction <strong>Encrypter</strong> permet d'insérer les clés directement dans un fichier d'opération sans risque pour leur confidentialité</p>

</div>
