<div class="mainform">
  <table><tr>
    <td>

      <a href="./assets/new_operation.yaml" download>Modèle d'opération</a>

      <app-upload-file (uploaded)="upload_operation($event)"
                       title="Ajouter une opération"
                       style="margin: 10px"
                       extensions=".yaml">
        Importer une opération
      </app-upload-file>

      <button type="button" mat-raised-button mat-button (click)="delete_ope()">
        Supprimer
      </button>
    </td>
    <td>
      <mat-form-field appearance="fill">
        <mat-label>Lancer une opération</mat-label>
        <mat-select [(value)]="sel_ope" (selectionChange)="refresh_ope($event)" >
          <mat-option *ngFor="let ope of opes" [value]="ope.content">
            {{ope.title}}
          </mat-option>
        </mat-select>
        <mat-icon matSuffix (click)="sel_ope=null;">cancel</mat-icon>
      </mat-form-field>
    </td>
  </tr></table>

  <div *ngIf="sel_ope">
    <div *ngIf="sel_ope.lottery.visible">
      Loterie<br>
      <table>
        <tr><td>Page complète</td><td><a [href]="sel_ope.lottery.application" target="same">{{url}}</a></td></tr>
        <tr><td>Iframe</td><td>{{sel_ope.lottery.iframe_code}}</td></tr>
        <tr><td>QRCode</td><td>{{sel_ope.lottery.image_code}}</td></tr>
      </table>
    </div>
    <br>
    <div *ngIf="sel_ope.validate.visible">
      Validation<br>
      <table  class="mat-elevation-z4">
        <tr>
          <td>
            Validateurs autorisés:
            <ul>
              <li *ngFor="let user of sel_ope.validate.users">{{user}}</li>
            </ul>
          </td>
          <td>
            Notifier les validateurs<br>
            <button type="button" mat-raised-button mat-button (click)="send_mail()">
              Envoyer le mail
            </button>
          </td>
          <td>
            <a [href]="sel_ope.validate.application" target="_self">Application</a>
          </td>
        </tr>
      </table>
    </div>
  </div>

</div>
