#Ce fichier décrit les opérations de distribution de NFT via le service d'nfluent (https://nfluent.io)

#Il doit respecter le formation YAML (voir https://fr.wikipedia.org/wiki/YAML#Caract%C3%A9ristiques)

#une fois terminé, ce fichier doit être chargé a l'adresse : https://tokensol.nfluent.io/build


id: "calvi22_devnet"
title: "Calvi2022_devnet"
description: "Version test de l'opération de distribution de NFT sur le festival CalviOnTheRocks"
url: ""
website: ""
version: 0.1
network: solana-devnet      #Réseau concerné par l'opération

#la section accounts contient les clés privées (cryptées) des comptes Ã utiliser pendant l'opération
accounts:
  solana:
    paul: Z0FBQUFBQmltR2ZCaDRoMUw2VFdla2hJajh2STNlOV8xQlhUcXgxcGtfUFllX1BVT3gxN0xULXVzTGpCSVF1N29vTzR1OTBuX0lVakY2bjVpNlhNQ0x3WUttWGJnTnRnWEZaVXBiMWNHaHdnTmtyUms1OENOcjB2QkV2ZFJrSkZiZzE4RENtWHBJbVNBYVZZaC1LMnBrbEctSGJvNWsxdHJvbmpTa01GWW1KODFENFlSbTFsRHNWX28wX1Z1ZVc5SjdVdkpqRW8zM1ByQW9GNlB1YXNIUVN4YXdIUFhCS3N2Z2dKQnM0aW9ncGVyTWZmMDF0VzNWYUlaVzNocFh6X1pEQUswMXRjbXEyb3lCRE9UZmxiY2xnX0x4QnhZXzMzM2pZX1ZOQ2VNWHoxSVc2TVByQVBjMWFCTXpJRVZLU05BTkJYUUFZcUpUYjRTZTFoLXZMMXFPZkFlWGFLS3pOYV9mSGpnVklOMU5aM1NUb25hMmFvbXZ5YUU2QXZvSjUyeWtJNDQzMk9XZlRs

#localisation du fichier contenant les NFTs Ã proposer
#Plusieurs valeurs sont possibles:
#     - "database:<collection>" ou "db:<collection>" signifie que les NFT ont été importé préalablement via les outils nfluent (fichier Excel).
#     - une adresse internet peut désigner un fichier csv contenant une description des NFT distribué
#     - une adresse internet peut désigner un fichier json contenant un NFT Ã distribuer

data:
  sources:
#    - type: database
#      connexion: server

#    - type: json              #Les NFTs sont contenus dans un fichier json
#      connexion: "out.json"   #localisation du fichier, si aucun chemin, le systeme cherche sur le serveur

    - type: web              #Les NFTs sont contenus dans un fichier json
      connexion: "https://raw.githubusercontent.com/nfluentdev/Operations/main/out.json"   #localisation du fichier, si aucun chemin, le systeme cherche sur le serveur

#    - type: config
#      connexion: "Exemple.yaml"
#      seed: 10                          #Permet de générer toujours la même séquence
#      limit: 5                          #Nombre de nft à générer
#      creators:                         #Compte à utiliser comme créateurs
#        - "paul"

#Liste des comptes en charge du minage
miners:
  elrond: "paul"
  solana: "paul"


validate:
  title: "Bienvenu dans l'application de validation des passes Calvi On The Rocks"
  visible: True           #La section de validation est visible
  camera: True            #Si possible, utilise la caméra du device
  manual_input: True      #Le validateur peut saisir manuellement l'adresse du NFT du visiteur

  application: "$tokensol$/validate"

  users:                        #Liste des validateurs autorisé à modifier les NFTs
    - "paul.dudule@gmail.com"
    - "hhoareau@gmail.com"
    - "sophie.dudule@gmail.com"
    - "thomas@nfluent.io"

  support:
    message_search: #message affiché aux validateurs pour la détection du wallet
      "
      Veuillez flasher le QRCode du wallet FTX des visiteurs
      "
    message_action: #message affiché aux validateurs pour l'attribution des passes
      "
      Veuillez attribuer le nombre de passe souhaitez en fonction du solde restant sur le NFT
      "
    contact:
      mail: support@nfluent.io
      tel: 0619750804


  properties:                 #Liste des propriétés montrées au validateur
    - "Edition1"
    - "Edition2"
    - "Edition3"
    - "Edition4"
    - "Edition5"
    - "Last use"

  #Lorsque le validateur appui sur validation du billet l'API de action_api est appelé
  actions:
    buttons:
      - api : $nfluent_server$/api/action_calvi/?nb_pass=1
        label: Attribuer 1 pass
        n_pass: 1               #nombre de passe à distribuer
        collections:            #limiter l'action à certaines collections
          - "*"

      - api : $nfluent_server$/api/action_calvi/?nb_pass=2
        label: Attribuer 2 pass
        n_pass: 2
        collections:
          - "*"

    security:
      secret: "dudule12"        #secret passée en paramètre des APIs
      ip_whitelist:             #liste des adresses IP pouvant appeler l'API
        - "*"

  method:                     #Methode à utiliser pour la mise a jour
    update_token: True        #Indique que le NFT va être mise a jour à chaque modification des metadata
    update_authority: paul    #Compte utilisé pour la mise a jour des NFT (ce compte doit être présent sur le serveur)
    storage: github           #plateformes disponibles: IPFS, IPFS via infura, NFTStorage
    repository: test2         #Répertoire utilisé pour stocker les métadataoffchain


  #Seul les NFT qui vérifient les conditions ci-dessous sont sélectionnables pour la validation
  filters:
    mint_authority: ''

    collections:
      - "La Citadella"
      - "A Madonna Di A Sierra"

    symbol: ''      #Ici on saisie une chaine de caractère que doit contenir le symbole du NFT pour pouvoir être validé








#Section destinée la distribution de NFT gratuitement
lottery:
  visible: True

  redirections:
    winner: "Bravo vous avez un nouveau NFT, vous pouvez fermer cette fenêtre"
    looser: "Retentez votre chance"

  application: "$nfluent_appli$/contest"

  collections:        #Liste des collections concernées par la distribution gratuite
    - "A Madonna Di A Sierra"

  limits: #Définie les limites sur le nombre de nft miner
    collections:
      - name: "A Madonna Di A Sierra"
        total: 5

      - name: "La Citadella"
        total: 5

    total:
      by_day: 5
      by_month: 5
      by_year: 5


  showVisual: True    #Affiche le visuel
  duration: 100        #durée en seconde d'affichage des NFTs

  period:
    #Permet de commencer l'opération à un moment précis et la faire s'arrêter
    dtStart: "now"
    dtEnd: ""
    duration: 1

security:
  #Liste des adresses internet (IP ADDRESS) pouvant appeler l'api
  whitelist:
    - "*"
