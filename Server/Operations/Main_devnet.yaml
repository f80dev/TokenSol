#Ce fichier décrit les opérations de distribution de NFT via le service d'nfluent (https://nfluent.io)

#Il doit respecter le formation YAML (voir https://fr.wikipedia.org/wiki/YAML#Caract%C3%A9ristiques)

#une fois terminé, ce fichier doit être chargé a l'adresse : https://tokensol.nfluent.io/build

#notes:
# $nfluent_appli$ est utilisé dans les API pour désigner l'appli nfluent. A terme il est possible d'utiliser des applis propriétaires

format: "yamlv1"
id: "Main_devnet"          #cet Id doit être cohérent avec le nom du fichier
title: "Opération fictive / Modele principal"     #est le titre usuel de l'operation qui apparait pour les validateurs
description: "Modèle principal"
website: "https://nfluent.io"   #désigne le site concerné par l'opération
version: 0.1
network: elrond-devnet      #Réseau concerné par l'opération, utilisé également comme cible lorsque le destinataire n'a pas de wallet
wallet: "$nfluent_appli$/wallet"

#Préférences à appliquer pour les NFT issue d'un fichier ou d'une base de données a miner
lazy_mining:
  metadata_storage: github/test6      #plateforme de destibation des propriétés du NFT
  content_storage: NFTstorage         #plateforme de destibation des images
  miner:                              #Miner en charge du minage de la collection. Si vide on utilise le propriétaire de la collection
#!!!!! Attention le mineur doit être propriétaire de la collection de minage


#section détaillant l'événement associé à cette opération
event:
  title: Ventes aux enchères
  place: 12 rue Martel, 75010 Paris   #Lieu de l'événement
  web:
  dates:                              #Liste des périodes d'ouvertures
    - start: 04/02/1971 20:00
      end: 04/02/1971 22:00



#Section permettant de décrire précisément les collections utilisées par les NFT
collections:
  - id: "PHILHARM-f25fc0"          #Id de la collection. A priori cet id doit se trouver dans les sources
    name: "PhilarmonieDeParis"               #Ce nom est utilisé dans les outils, il peut être plus long que celui stocké dans la blockchain
    visual:  https://img.over-blog-kiwi.com/1/48/41/00/20161126/ob_602568_philarmonieparis-logo.png
    description: Collection de NFTs dédiés au brainstorm avec la philarmonie



database:                 #base de données générale de l'outil pour les historiques
  connexion: server
  dbname: nfluent

#la section accounts contient les clés privées (cryptées) des comptes Ã utiliser pendant l'opération
#accounts:
#  solana:
#    paul: Z0FBQUFBQmltR2ZCaDRoMUw2VFdla2hJajh2STNlOV8xQlhUcXgxcGtfUFllX1BVT3gxN0xULXVzTGpCSVF1N29vTzR1OTBuX0lVakY2bjVpNlhNQ0x3WUttWGJnTnRnWEZaVXBiMWNHaHdnTmtyUms1OENOcjB2QkV2ZFJrSkZiZzE4RENtWHBJbVNBYVZZaC1LMnBrbEctSGJvNWsxdHJvbmpTa01GWW1KODFENFlSbTFsRHNWX28wX1Z1ZVc5SjdVdkpqRW8zM1ByQW9GNlB1YXNIUVN4YXdIUFhCS3N2Z2dKQnM0aW9ncGVyTWZmMDF0VzNWYUlaVzNocFh6X1pEQUswMXRjbXEyb3lCRE9UZmxiY2xnX0x4QnhZXzMzM2pZX1ZOQ2VNWHoxSVc2TVByQVBjMWFCTXpJRVZLU05BTkJYUUFZcUpUYjRTZTFoLXZMMXFPZkFlWGFLS3pOYV9mSGpnVklOMU5aM1NUb25hMmFvbXZ5YUU2QXZvSjUyeWtJNDQzMk9XZlRs


branding:                     #Utiliser pour uniformiser l'aspect des applications
  style:
    background-color: darkgrey
    color: white
    font-size: medium
    text-align: center
    height: fit-content
    min-height: 100vh

#Mail envoyé aux personnes ne disposant pas d'un wallet
#les champs remarquables utilisablent sont
# {{mini_wallet}} : adresse du wallet nfluent
# {{url_wallet}}: adresse du wallet web
# {{words}}: seed du wallet (liste des 12 ou 24 mots permettant de retrouver le wallet)
# {{qrcode}}: seed au format QRCODE
# {{signature}}: signature de l'équipe nfluent
# {{appname}}: Nom de l'application emetrice (ici TokenForge)
new_account:
  mail: ""
  max_account_by_email: 1     #fixe un nombre de compte maximum par email. S'il existe une limite le système doit stocker l'email
  to_start:                   #permet d'attribuer de la monnaie au nouvau client
    money:                    #identifiant de la monnaie (ERC20)
    bank:                     #account fournissant la monnaie
    amount: 0                 #montant à attribuer


#Fonctionnement de la section data ______________________________________________________________________________________________________________________________
#localisation du fichier contenant les NFTs Ã proposer
#Plusieurs valeurs sont possibles:
#     - "database:<collection>" ou "db:<collection>" signifie que les NFT ont été importé préalablement via les outils nfluent (fichier Excel).
#     - une adresse internet peut désigner un fichier csv contenant une description des NFT distribué
#     - une adresse internet peut désigner un fichier json contenant un NFT Ã distribuer
#connexion désigne la localisation de la base de donnée. Cela peut être un alias (server, cloud, cloud2) ou
#plus simplement une chaine de connexion comme "mongodb+srv://Hhoareau:<password>@cluster0.mr2j9.mongodb.net/?retryWrites=true&w=majority"
#"mongodb://admin:<password>@server.f80lab.com:27017"
data:
  sources:
    - type: network
      active: True
      connexion: elrond-devnet
      filter:
        limit: 200
      owner:                   #Tous les NGFt de l'owner
      collections:             #Tous les NFT des collections ci-dessous
        - "PHILHARM-f25fc0"


    - type: database
      active: False
      connexion: cloud          #localisation (cloud:server Atlas, server: f80lab web3 (Akash network))
      dbname: nfluent           #Nom de la base de données contenant les NFTS
      filter:
        limit: 200


#    - type: json              #Les NFTs sont contenus dans un fichier json
#      active: False
#      connexion: "out.json"   #localisation du fichier, si aucun chemin, le systeme cherche sur le serveur


#    - type: web              #Les NFTs sont contenus dans un fichier json
#      active: False
      #connexion: "https://raw.githubusercontent.com/nfluentdev/Operations/main/out.json"   #localisation du fichier, si aucun chemin, le systeme cherche sur le serveur


    - type: file            #permet d'aller chercher les NFT dans un fichier
      active: False
      connexion: ""         #designe la localisation du fichier contenant les NFT
      nfts: []

    - type: config           #L'objectif de cette rubrique est de se reposer sur la config du générateur de collection
      active: False
      connexion: "Exemple.yaml"
      seed: 10                          #Permet de générer toujours la même séquence
      limit: 5                          #Nombre de nft à générer
      creators:                         #Compte à utiliser comme créateurs
        - "paul"


#Section utilisée pour personnalisé les messages envoyés aux clients
contact:
  create_account_email:       #désigne le mail envoyer à la création de compte
    preambule: ""
    epilogue: ""


#Fonctionnement de la section Validate _____________________________________________________________________________________________________________________________
#Section responsable du process de validation des NFTs
validate:
  title: "Bienvenu dans l'application de validation des NFT nfluent"    #Message d'acceuil des validateurs
  visible: True           #La section de validation est visible
  camera: True            #Si possible, utilise la caméra du device
  manual_input: True      #Le validateur peut saisir manuellement l'adresse du NFT du visiteur

  application: "$nfluent_appli$/validate"

  #Liste des validateurs autorisé à modifier les NFTs
  #Si cette liste est vide, on fonctionne sur un principe d'autovalidation
  users:
#    - "paul.dudule@gmail.com"
#    - "hhoareau@gmail.com"
#    - "sophie.dudule@gmail.com"
#    - "thomas@nfluent.io"

  #Cette section regroupe les possibilités offerte au visiteur en phase d'autovalidation
  #voir la description de cette section ci-dessus
  authentification:
    webcam: True
    wallet_connect: False
    google: False
    address: False
    nfluent_wallet_connect: True

  support:
    #message affiché aux validateurs pour la détection du wallet
    message_search: "Veuillez flasher le QRCode présenté par les visiteurs"

    #message affiché aux validateurs pour l'attribution des passes
    message_action: "Veuillez attribuer le nombre de passes souhaitez en fonction du solde restant sur le NFT"

    #message affiché en cas de dysfonctionnement de l'outil
    warning_process:
      "
      <h2>Procédure dégradée</h2>
      En cas d'impossibilité de valider le NFT du visiteur, veuillez adresser un mail à <a href='mailto:support@nfluent.io'>support@nfluent.io</a> en précisant
      <ul>
        <li>l'adresse du wallet du client</li>
      </ul>
      "

    #Section des points de contact présentés aux validateurs
    #Cette section n'est pas utilisable en autovalidation
    contacts:
      message: Besoin d'aide ?                      #Message afficher en tête des points de contact du support
      mail: mailto:support@nfluent.io
      phone: ""
      telegram: "https://t.me/+S2pSVLljMEVjN2Jk"    #Le lien d'invitation telegram s'obtient dans le menu "Gérer le groupe" de l'application Telegram


  #Liste des propriétés montrées au validateur à la validation du billet
  properties:
    - ""

  #Lorsque le validateur appui sur validation du billet l'API de action_api est appelé
  actions:
    #buttons permet d'afficher une action à réalisé par le validateur sur le NFT (par exemple marqué le NFT comme utilisé)
    #la section contient l'api appelée lorsqu'on déclenche le bouton, le message affiché
#    buttons:
#      - api : $nfluent_server$/api/action_demo/?nb_pass=1    #api appelée lorsqu'on valide le NFT
#        label: Attribuer 1 pass     #Message affiché au validateur
#        n_pass: 1                   #nombre de passe à distribuer
#        collections:                #limiter l'action à certaines collections
#          - "nfluentteam"
#          - "bayard"
#          - "NFluenT"


    #Procédure déclenchée automatiquement si le visiteur dispose du NFT
    success:
      message: "Passage autorisé"   #Message affiché sur l'écran de validation
      api: ""
      redirect: ""                  #Permet la redirection du visiteur sur une page données

    fault:
      message: "Passage interdit. Autorisation manquante"   #Message affiché sur l'écran de validation en cas d'échec
      redirect: ""                                          #Permet la redirection du visiteur sur une page données
      api: ""

    #Cette section dédiée à la sécurité regroupe certains points permettant de renforcer la sécurité des APIs
    security:
      secret: "dudule12"        #secret passée en paramètre des APIs
      ip_whitelist:             #liste des adresses IP pouvant appeler l'API
        - "*"

  method:                    #Methode à utiliser pour la mise a jour
    update_token: False      #Indique que le NFT va être mise a jour à chaque modification des metadata
    update_authority: paul   #Compte utilisé pour la mise a jour des NFT (ce compte doit être présent sur le serveur)
    storage: OnChain            #plateformes disponibles: IPFS, IPFS via infura, NFTStorage, OnChain
    repository:              #Répertoire utilisé pour stocker les métadata offchain après mise a jour


  #Seul les NFT qui vérifient les conditions ci-dessous sont sélectionnables pour la validation
  filters:
    mint_authority: ''
    collections:                #Liste des collections que le visiteur doit posséder pour avoir l'accès
      - "PHILHARM-f25fc0"
    symbol: ''                  #Ici on saisie une chaine de caractère que doit contenir le symbole du NFT pour pouvoir être validé


payment: #Section désignant le réceptionnaire des payment via google pay : https://www.npmjs.com/package/@google-pay/button-angular
  merchantId: "BCR2DN4TYD4Z5XCR"
  merchantName: "NFluenT"
  currencyCode: "EUR"
  countryCode: "FR"
  billing: True



store:              #Cette section regroupe l'ensemble des propriétés liés à la vente des NFTs via des stores dédiés
  visible: True
  application: '$nfluent_appli$/store'    #Désigne l'application en charge de la vente

  authentification:
    google: True
    address: True
    email: True
    nfluent_wallet_connect: True

  #Collection mise en vente dans le store (parmi les NFT issue de la section data/sources)
  collections:
    - "PHILHARM-f25fc0"

  #Cette zone permet de ne prendre qu'une partie des NFT des collections ci-dessous
  filter:
    from: 1
    to: 3

  support:      #Section regroupant les différents messages d'aides aux utilisateur
    buy_message: "Achat en cours"

# section regroupant l'ensemble des propriétés liés à une boutique prestashop
# Sur prestashop il faut installer le module web service, avec les permissions sur
# categories, contacts, customers, images, order_details, order_states, images, order_details, order_histories, order_states,
# orders, product_feature_values,product_feature,product_option_values, product_options, products, stock_available

#  prestashop:
#    server: "http://127.0.0.1:8080"              #adresse du serveur Prestashop
#    #server: "http://161.97.75.165:8080"              #adresse du serveur Prestashop
#    address: "$server$/fr/"                         #page de la boutique ($server$ reprend le contenu de la propriété server (ci-dessus) de la section
#    admin: "$server$/admin4280/"                    #page d'administration de la boutique
#    #api_key: "IN87FZBSUZCD3QPVXU2WSDI2MI9T8JVL"       #clé d'usage des API : https://devdocs.prestashop.com/1.7/webservice/getting-started/
#    api_key: "H8T5U4U45T7XBM5L52TG4LKHXM7X6C4H"

  prestashop:
    server: http://192.168.1.46/dev.domainhere.info
    address: $server$
    admin: $server$/admin0350wjass5jk2cfodh7
    api_key: SVVPEQP65QDYAUQX7S3HWFTPX1TIEDJ7


#  prestashop:
#    server: "https://shop.nfluent.io/"
#    address: "$server$/fr/"
#    admin: "$server$/admin4280/"
#    api_key: "DLHZSTR7IB5X68BW4HZGDCIWBIYC9F32"

    root_category:                                    #Catégorie utilisé pour l'ensemble des NFT, la collection étant utilisé en sous catégorie
      name: NFTs                                      #Catégorie utilisé pour l'ensemble des NFT, la collection étant utilisé en sous catégorie
      description: Nos collections de NFT
      visual: ""

    on_sale: True                                     #Mettre en vente ou pas immédiatement les NFT
    language: 1


#Fonctionnement de la section dispenser ____________________________________________________________________________________________________________________________
#Section lié à la distribution nominative de NFT
dispenser:
  visible: True
  application: '$nfluent_appli$/dispenser'          #Désigne l'application en charge de la distribution
  collections:                                      #Liste des collections concernée par la distribution (si vide toutes les collections disponibles depuis la source sont prises en compte)
  authentification:                                 #il s'agit d'authentifier le destinataire (et non une auto-authentification)
    address: True
    email: True
    google: True
  title: Recuperer votre NFT                                  #Titre afficher sur la fenetre proposant l'envoie du NFT
  prompt: Indiquer votre addresse email pour recevoir ce NFT  #Message affiché dans la zone de saisie
  selfWalletConnection: True



airdrop:
  visible: True
  collections: []


#Distribution de NFT au sein d'une ou plusieurs collecion à l'aveugle
#le destinataire donne juste une adresse mail
candymachine:
  visible: True

  connexion:
    wallet_connect: False          #Permet de se connecter à la candy machine via wallet connect
    nfluent_wallet_connect: True
    webcam: False
    network: False
    email: True
    address: True
    on_device: False
    google: True

  collections: []                 #Liste les collections disponibles via la candy machine

  messages:
    title: "Flasher ce code pour obtenir un NFT de la collection NFLuenT"

  limit:
    total: 60
    per_user: 1






#Fonctionnement de la section lottery ________________________________________________________________________________________________________________________________
#Section destinée la distribution de NFT gratuitement
lottery:
  visible: True     #Rends la section visible ou pas en production
  miner: paul

  messages:
    title: "Flasher ce QRCode pour récupérer gratuitement le NFT"

  #Ensemble d'attribues pour la présentation de l'écran
  screen:
    background_style: {"background-color":"#494975FF","font-weight":"lighter","color":"white","height":"100vh","text-align":"center"}           #Style appliqué au fond de l'écran
    qrcode_size: '70%'                             #taille du qrcode
    visual_size: '80%'                             #taille du visuel
    title: "Gagnez des NFTs exclusifs"             #titre en haut de la fenêtre
    bottom_title: "The NFluent NFT Candy-Machine"              #titre en bas de la fenêtre
    title_style: {"font-size":"x-large","margin":"10px"}   #style du titre
    showVisual: True                        #Affiche le visuel


  end_process:
    winner:
      message: "Bravo vous avez un nouveau NFT, vous pouvez fermer cette fenêtre" #Message affiché après l'obtention du NFT
      redirection: "https://www.calviontherocks.com/fr"
    looser:
      message: "Retentez votre chance"                                            #Messge affiché si l'obtention du NFT à échoué
      redirection: "https://www.calviontherocks.com/fr"


  authentification:         #Cette section décrit le mode d'authentification retenu pour obtenir le token
    on_device: True         #Authentification via la dealermachine sur le device qui flash le qrcode
    wallet_connect: True   #Authentification via wallet connect
    google: True            #Propose l'identification de l'email via google
    address: True           #Propose la barre d'adresse pour l'authentifiation
    webcam: False
    validator: True         #Propose un qrcode qui doit être visé par le wallet nfluent pour authentification


  application: "$nfluent_appli$/contest"

  collections: [] #Définie les collections impliquées dans la distribution (si vide tous les tokens disponibles sont intégrés)

  limits:     #définis les quotas de minages toutes collections confondus
    by_day: 50
    by_month: 50
    by_year: 50

  duration: 100        #durée en seconde d'affichage des NFTs

  period:
    #Permet de commencer l'opération à un moment précis et la faire s'arrêter
    dtStart: "now"
    dtEnd: ""
    duration: 1



#Section rassemblant l'ensemble des paramètres en charge de la sécurité de TokenForge
security:
  #Liste des adresses internet (IP ADDRESS) pouvant appeler l'api
  whitelist:
    - "*"



#section détaillant la possibilité de faire des photos
nftlive:
  collections:              #design la collection qui donne le droit d'utiliser NFTLive
    - "PHILHARM-f25fc0"

  limit: 10                           #nombre de NFT à proposer à l'utilisateurs
  price: 0                            #prix d'utilisation du service

  dynamic_fields:                     #liste de champs utilisé par le créateur pour personnaliser le NFT
    - name: description               #nom du champs, présent dans un SVG du NFT sous le libellé _description_
      maxlen: 30                      #nombre maximum de caractères
      message: "Note placée en bas de votre photo"
      value: "votre message"

  nft_target:                               #désigne les caractéristiques du NFT qui sera miné
    miner: paul
    collection: "PHILHARM-f25fc0"           #collection auquel appartiendra le NFT (Vérifier que le miner à les droits sur cette collection)
    royalties: 20                           #royalties pour le mineur
    configuration: "philharmonie_nftlive"   #nom de la configuration à utiliser
    dimension:                              #dimension est optionnelle, et permet d'écraser la valeur contenu dans le fichier de configuration

    permissions:
      transfer: True
      update_name: True
      update_attributes: True




